<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>ActionBar | Android常用学习资源</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="../ui/toast.html" />
    
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="1.5" data-basepath=".." data-revision="1436495550272">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> UI</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" >
            
            <span><b>1.1.</b> Layouts</span>
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" >
            
            <span><b>1.2.</b> Components</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.2.1" data-path="ui/textview.html">
            
                
                    <a href="../ui/textview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.1.</b>
                        
                         TextView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2.2" data-path="ui/webview.html">
            
                
                    <a href="../ui/webview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.2.</b>
                        
                         WebView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2.3" data-path="ui/recyclerview.html">
            
                
                    <a href="../ui/recyclerview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.3.</b>
                        
                         RecyclerView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2.4" data-path="ui/fragmenttabhost.html">
            
                
                    <a href="../ui/fragmenttabhost.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.4.</b>
                        
                         FragmentTabHost
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2.5" data-path="ui/viewpager.html">
            
                
                    <a href="../ui/viewpager.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.5.</b>
                        
                         ViewPager
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.3" >
            
            <span><b>1.3.</b> AdapterView</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.3.1" data-path="ui/listview.html">
            
                
                    <a href="../ui/listview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.1.</b>
                        
                         ListView
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.4" >
            
            <span><b>1.4.</b> Adapter</span>
            
            
        </li>
    
        
        <li class="chapter active" data-level="1.5" data-path="ui/actionbar.html">
            
                
                    <a href="../ui/actionbar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                         ActionBar
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.6" data-path="ui/toast.html">
            
                
                    <a href="../ui/toast.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                         Toast
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7" data-path="ui/notification.html">
            
                
                    <a href="../ui/notification.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                         Notification
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.8" data-path="ui/layoutinflater.html">
            
                
                    <a href="../ui/layoutinflater.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                         LayoutInflater
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.9" data-path="ui/customview.html">
            
                
                    <a href="../ui/customview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                         自定义View
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.10" >
            
            <span><b>1.10.</b> Resource</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.10.1" data-path="ui/drawable-resource.html">
            
                
                    <a href="../ui/drawable-resource.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.1.</b>
                        
                         DrawableResource
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Intent</span>
            
            
        </li>
    
        
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Activity</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="activity/Activity启动模式.html">
            
                
                    <a href="../activity/Activity启动模式.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Activity启动模式
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="activity/页面切换之间的数据传递.html">
            
                
                    <a href="../activity/页面切换之间的数据传递.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         数据传递
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Fragment</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="fragment/manager.html">
            
                
                    <a href="../fragment/manager.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Fragment管理
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Service</span>
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="get_androidmanifest_info.html">
            
                
                    <a href="../get_androidmanifest_info.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         获取AndroidManifest.xml信息
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" >
            
            <span><b>7.</b> [多线程]</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="multithread/handler.html">
            
                
                    <a href="../multithread/handler.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         Handler
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" >
            
            <span><b>8.</b> [存储]</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="data/sharedpreferences.html">
            
                
                    <a href="../data/sharedpreferences.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         SharedPreferences
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" >
            
            <span><b>8.2.</b> [数据库]</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.1" data-path="data/sqlite.html">
            
                
                    <a href="../data/sqlite.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                         SQLite使用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.2" data-path="data/activeandroid.html">
            
                
                    <a href="../data/activeandroid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                         ActiveAndroid
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="RxJava.html">
            
                
                    <a href="../RxJava.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         RxJava
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="MVVM.html">
            
                
                    <a href="../MVVM.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         MVVM
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="parse/gson.html">
            
                
                    <a href="../parse/gson.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         JSON解析
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" >
            
            <span><b>12.</b> 网络请求</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="12.1" data-path="net/httpurlconnection.html">
            
                
                    <a href="../net/httpurlconnection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.1.</b>
                        
                         HttpURLConnection使用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.2" data-path="net/okhttp.html">
            
                
                    <a href="../net/okhttp.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.2.</b>
                        
                         OkHttp
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.3" data-path="net/retrofit.html">
            
                
                    <a href="../net/retrofit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.3.</b>
                        
                         Retrofit
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.4" data-path="net/volley.html">
            
                
                    <a href="../net/volley.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.4.</b>
                        
                         Volley
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="13" >
            
            <span><b>13.</b> 网络图片加载</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="13.1" data-path="net/android-universal-image-loader.html">
            
                
                    <a href="../net/android-universal-image-loader.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.1.</b>
                        
                         Android-Universal-Image-Loader
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.2" data-path="net/picasso.html">
            
                
                    <a href="../net/picasso.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.2.</b>
                        
                         Picasso
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="net/downloadprovider.html">
            
                
                    <a href="../net/downloadprovider.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         DownloadProvider
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" >
            
            <span><b>15.</b> 注解</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="15.1" data-path="annotation/butterknife.html">
            
                
                    <a href="../annotation/butterknife.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                         ButterKnife
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15.2" data-path="annotation/androidannotations.html">
            
                
                    <a href="../annotation/androidannotations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.2.</b>
                        
                         AndroidAnnotations
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="16" >
            
            <span><b>16.</b> 工具</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="16.1" >
            
            <span><b>16.1.</b> AndroidStudio</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="16.1.1" data-path="tools/android-studio/tips_and_tricks.html">
            
                
                    <a href="../tools/android-studio/tips_and_tricks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.1.</b>
                        
                         提示和技巧
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16.1.2" data-path="tools/android-studio/question.html">
            
                
                    <a href="../tools/android-studio/question.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.2.</b>
                        
                         常见问题
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="16.2" data-path="tools/android-resource-remover.html">
            
                
                    <a href="../tools/android-resource-remover.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                         android-resource-remover
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Android常用学习资源</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_1149">
                    
                        <h1 id="actionbar">ActionBar使用</h1>
<p><img src="https://github.com/ITBox/ITBox.github.io/blob/master/images/D06A00CC-E866-4B48-B09A-41609D28B275.png?raw=true" alt=""></p>
<p>随着AndroidDesign的Holo风格越来越普及，Android应用程序也有了自己的设计风格，微信5.2也转向的Holo风格，ActionBar是Holo风格中重要的元素，接下来我将简单介绍ActionBar如何应用到项目中。</p>
<p><a href="http://developer.android.com/guide/topics/ui/actionbar.html" target="_blank">ActionBar</a>是android3.0之后（API Level 11）才加入的。在此之前一般是使用Github上的开源项目<a href="https://github.com/JakeWharton/ActionBarSherlock" target="_blank">ActionBarSherlock</a>来兼容低版本。2013年google发布了v7 appcompact library,可以让开发者在android 2.1(API level 7)以及以上版本上使用ActionBar。我们这里主要讲解一下使用v7 appcompact library来实现ActionBar。</p>
<h3 id="actionbar">ActionBar的显示与隐藏</h3>
<p> 如果还没有v7支持库，打开SDK Manager安装即可</p>
<p><img src="https://github.com/baoyongzhang/test_pages/blob/gh-pages/image-1.png?raw=true" alt="SDK Manager"></p>
<p>安装之后，在sdk目录下的extras目录中可应该可以找到v4,v7,v13支持库，v7中包含了三个项目，ActionBar只需要使用v7中的appcompat项目。</p>
<p><img src="https://github.com/baoyongzhang/test_pages/blob/gh-pages/image-2.png?raw=true" alt="v7 appcompat"></p>
<p>接下来新建一个Android Project，我使用的是eclipse，然后导入v7中得appcompat项目，这里要注意一下，appcompat项目是包含资源文件的（比如ActionBar的背景图片），只导入jar包是不行的，我们的工程需要关联appcompat项目，如何关联请参考Android Library项目的使用。</p>
<p>在清单文件中配置activity的Theme，也可以在application中配置全局Theme，appcompat提供了三种Theme：</p>
<blockquote>
<p>黑色主题：@Style/Theme.AppCompat</p>
<p>白色主题：@Style/Theme.AppCompat.Light</p>
<p>白色主题，黑色ActionBar：@Style/Theme.AppCompat.Light.DarkActionBar</p>
</blockquote>
<p>也可以自定义Style继承上面几种Theme。</p>
<p>配置完主题之后，我们需要将Activity继承ActionBarActivity，如果需要使用v4包中的FragmentActivity也不需要担心，因为ActionBarActivity继承了FragmentActivity。</p>
<p>在Activity中调用getSupportActionBar()方法可以获取ActionBar对象，ActionBar默认是显示的，如果想隐藏可以调用ActionBar.hide()方法，显示则调用ActionBar.show();</p>
<pre><code class="lang-java">        ActionBar actionBar = getSupportActionBar();
        <span class="hljs-keyword">if</span> (actionBar.isShowing()) {<span class="hljs-comment">// 判断ActionBar是否显示</span>
            actionBar.hide();<span class="hljs-comment">// 隐藏ActionBar</span>
        } <span class="hljs-keyword">else</span> {
            actionBar.show();<span class="hljs-comment">// 显示ActionBar</span>
        }
</code></pre>
<h4 id="logoicon">使用Logo替换icon</h4>
<p>默认的,ActionBar调用应用图标。如果在<code>&lt;application&gt;</code>或者<code>&lt;activity&gt;</code>元素中，指定logo属性，ActionBar将使用logo替代icon</p>
<p><strong>ActionBar一些常用的方法</strong></p>
<ul>
<li>setBackgroundDrawable(Drawable drawable):为ActionBar设置背景。</li>
<li>setDisplayHomeAsUpEnabled(boolean b)：是否显示返回的按钮。</li>
<li>setDisplayShowHomeEnabled(boolean b);是否显示icon</li>
<li>setDisplayShowTitleEnabled(boolean b);是否显示标题</li>
<li>setDisplayShowCustomEnabled(boolean b);是否显示自定义view</li>
<li>setIcon();设置Icon</li>
<li>setTitle();设置标题</li>
<li>getSelectedNavigationIndex()获取选择条目的索引。</li>
</ul>
<h3 id="action-item">添加Action Item</h3>
<p>当你开启Activity时，系统通过调用Activity的onCreateOptionsMenu()方法来放置action items。使用这个方法inflate一个定义所有action items的菜单资源。</p>
<pre><code class="lang-xml">
<span class="hljs-tag">&lt;<span class="hljs-title">menu</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/action_search"</span>
          <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_action_search"</span>
          <span class="hljs-attribute">android:title</span>=<span class="hljs-value">"@string/action_search"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/action_compose"</span>
          <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_action_compose"</span>
          <span class="hljs-attribute">android:title</span>=<span class="hljs-value">"@string/action_compose"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">menu</span>&gt;</span>
</code></pre>
<p>然后调用Activity的onCreateOptionsMenu()方法中添加将所有的action item添加到ActionBar上。</p>
<pre><code class="lang-java">
<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(Menu menu)</span> </span>{
    <span class="hljs-comment">// Inflate the menu items for use in the action bar</span>
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_activity_actions, menu);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onCreateOptionsMenu(menu);
}
</code></pre>
<p>想要item直接显示在actionbar上，需要在<item>标签中，添加一个showAsAction=&quot;ifRoom&quot;属性。</p>
<pre><code class="lang-xml">
<span class="hljs-tag">&lt;<span class="hljs-title">menu</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
      <span class="hljs-attribute">xmlns:yourapp</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/action_search"</span>
          <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_action_search"</span>
          <span class="hljs-attribute">android:title</span>=<span class="hljs-value">"@string/action_search"</span>
          <span class="hljs-attribute">yourapp:showAsAction</span>=<span class="hljs-value">"ifRoom"</span>  /&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-title">menu</span>&gt;</span>
</code></pre>
<p>如果没有足够的空间，它将以悬浮菜单的样式显示。</p>
<h4 id="support-library">使用support library的属性</h4>
<p>注意上面的showAsAction 属性使用了一个自定义命名空间。在使用support library定义的属性必须自定义命名空间。因为这些属性在一些老的Android设备上不存在。</p>
<p>如果同时指定了title和icon属性，action item默认只显示icon.如果需要显示标题，需要为showAsAction属性添加withText值,如果icon可用并且actionbar空间不足时，title将不显示。</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">yourapp:showAsAction</span>=<span class="hljs-value">"ifRoom|withText"</span> <span class="hljs-attribute">...</span> /&gt;</span>
</code></pre>
<p>尽管可能你不需要显示title，但是仍然要指定title属性的值。</p>
<ul>
<li>如果空间不足，菜单将以悬浮状态显示，并且只显示title。</li>
<li>如果action item只显示icon,用户可以通过长按条目显示title。</li>
</ul>
<p>你也可以设置showAsAction属性的值为always，让一个action item一直显示，但是你最好不要让一个action item一直显示。这样做在窄屏上出现一些布局适配的问题。</p>
<h4 id="">处理条目点击</h4>
<p>当用户点击一个条目时，系统将点击的MenuItem传递给Activity的onOptionsItemSelected() 方法。</p>
<pre><code class="lang-java"><span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(MenuItem item)</span> </span>{
    <span class="hljs-comment">// Handle presses on the action bar items</span>
    <span class="hljs-keyword">switch</span> (item.getItemId()) {
        <span class="hljs-keyword">case</span> R.id.action_search:
            openSearch();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">case</span> R.id.action_compose:
            composeMessage();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onOptionsItemSelected(item);
    }
}
</code></pre>
<p>向上返回的按钮的id是android.R.id.home 所以通过下面代码就能实现点击返回按钮返回的功能。</p>
<pre><code class="lang-java">
 setDisplayHomeAsUpEnabled(<span class="hljs-keyword">true</span>);<span class="hljs-comment">//显示返回箭头</span>
<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(MenuItem item)</span> </span>{
    <span class="hljs-comment">// Handle presses on the action bar items</span>
    <span class="hljs-keyword">switch</span> (item.getItemId()) {
        <span class="hljs-keyword">case</span> android.R.id.home:
                finish();
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onOptionsItemSelected(item);
    }
}
</code></pre>
<h4 id="actionbar">使用分离的ActionBar</h4>
<p><img src="http://developer.android.com/images/ui/actionbar-splitaction@2x.png" alt="">
ActionBar可以分割成屏幕上方和屏幕下方两部分来显示（如上图所示）。分割的ActionBar可以让空间能够更合理的利用。</p>
<p>为了实现分离的ActionBar，必须做以下两件事情：</p>
<ol>
<li><p>添加uiOptions=&quot;splitActionBarWhenNarrow&quot;到<activity>元素或 <application> 元素中。这个属性只能在API 14+上起作用，低版本将忽略这个属性。</p>
</li>
<li><p>为了支持低版本，在<code>&lt;activity&gt;</code>元素中添加一个<code>&lt;mata-data&gt;</code>元素，</p>
</li>
</ol>
<pre><code class="lang-xml">
<span class="hljs-tag">&lt;<span class="hljs-title">manifest</span> <span class="hljs-attribute">...</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">uiOptions</span>=<span class="hljs-value">"splitActionBarWhenNarrow"</span> <span class="hljs-attribute">...</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta-data</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.support.UI_OPTIONS"</span>
                   <span class="hljs-attribute">android:value</span>=<span class="hljs-value">"splitActionBarWhenNarrow"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
</code></pre>
<h3 id="action-view">添加一个Action View</h3>
<p>Action View 提供了一些复杂操作的快速入口，不需要改变Acitivity或者Fragment，并且不用替换ActionBar.例如，如果你想进行搜索，你可以通过给actionbar添加一个SearchView组件来实现（如图所示）。
<img src="http://developer.android.com/images/ui/actionbar-searchview@2x.png" alt="">
我们可以通过给acionlayout属性指定一个布局资源或者给actionViewClass属性指定一个组件类来添加一个Action View.</p>
<pre><code class="lang-xml">
<span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">menu</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
      <span class="hljs-attribute">xmlns:yourapp</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/action_search"</span>
          <span class="hljs-attribute">android:title</span>=<span class="hljs-value">"@string/action_search"</span>
          <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_action_search"</span>
          <span class="hljs-attribute">yourapp:showAsAction</span>=<span class="hljs-value">"ifRoom|collapseActionView"</span>
          <span class="hljs-attribute">yourapp:actionViewClass</span>=<span class="hljs-value">"android.support.v7.widget.SearchView"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">menu</span>&gt;</span>
</code></pre>
<p>注意showAsAction属性包含了一个collapseActionView值。</p>
<p>我们可以在onCreateOptionsMenu()方法中配置action view。通过静态方法MenuItemCompat.getActionView()可以获取一个到action view对象。这个方法需要传递一个MenuItem对象。</p>
<pre><code class="lang-java">
<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(Menu menu)</span> </span>{
    getMenuInflater().inflate(R.menu.main_activity_actions, menu);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);
    <span class="hljs-comment">// Configure the search info and add any event listeners</span>
    ...
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onCreateOptionsMenu(menu);
}
</code></pre>
<h4 id="-action-view">处理可折叠的 action view</h4>
<p>为了节省action bar的空间，可以将action view折叠成一个action button。当这个action button被选中时，action view将会被展开。只要为showAsAction属性添加一个collapseActionView值就可以让action view变的可折叠。</p>
<p>当用户点击action button，action view能够自动的展开，不需要在onOptionsItemSelected()方法中进行点击处理。但是如果将其返回值设置为true,action view将不会被展开。</p>
<p>当点下手机的返回按钮或者action bar的返回按钮，action view将会被折叠。</p>
<p>通过OnActionExpandListener监听器，可以监听到action view折叠和展开。</p>
<pre><code class="lang-java">
<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(Menu menu)</span> </span>{
    getMenuInflater().inflate(R.menu.options, menu);
    MenuItem menuItem = menu.findItem(R.id.actionItem);
    ...

    <span class="hljs-comment">// When using the support library, the setOnActionExpandListener() method is</span>
    <span class="hljs-comment">// static and accepts the MenuItem object as an argument</span>
    MenuItemCompat.setOnActionExpandListener(menuItem, <span class="hljs-keyword">new</span> OnActionExpandListener() {
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onMenuItemActionCollapse</span><span class="hljs-params">(MenuItem item)</span> </span>{
            <span class="hljs-comment">// Do something when collapsed</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;  <span class="hljs-comment">// Return true to collapse action view</span>
        }

        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onMenuItemActionExpand</span><span class="hljs-params">(MenuItem item)</span> </span>{
            <span class="hljs-comment">// Do something when expanded</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;  <span class="hljs-comment">// Return true to expand action view</span>
        }
    });
}
</code></pre>
<h3 id="-action-provider">添加 Action Provider</h3>
<p><img src="http://developer.android.com/images/ui/actionbar-shareaction@2x.png" alt=""></p>
<p>类似action view，action provider通过自定义布局来替换一个操作按钮.但是action provider控制所有的动作行为并且在被点击时能够显示一个子菜单。</p>
<p>通过为actionViewClass属性设置一个ActionProvider类，来添加action provider.也可以通过继承ActionProvider来创建自定义的action provider.Android提供了一些action provider,例如ShareActionProvider。</p>
<p>由于每一个ActionProvider类定义自己的动作行为，所以不需要通过onOptionsItemSelected()方法来设置其点击事件，但是你仍然可以通过此方法来设置其他操作，也可以通过onPerformDefaultAction()来设置别的操作。</p>
<p>如果action Provider提供一个子菜单，用户打开列表或者选中一个子菜单，activity将不调用onOptionsItemSelected()。</p>
<h4 id="shareactionprovider">使用ShareActionProvider</h4>
<p>使用ShareActionProvider添加一个分享操作需要一下步骤：</p>
<ul>
<li>设置actionProviderClass属性值为ShareActionProvider类.</li>
</ul>
<pre><code class="lang-xml">
<span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">menu</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
      <span class="hljs-attribute">xmlns:yourapp</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/action_share"</span>
          <span class="hljs-attribute">android:title</span>=<span class="hljs-value">"@string/share"</span>
          <span class="hljs-attribute">yourapp:showAsAction</span>=<span class="hljs-value">"ifRoom"</span>
          <span class="hljs-attribute">yourapp:actionProviderClass</span>=<span class="hljs-value">"android.support.v7.widget.ShareActionProvider"</span>
          /&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-title">menu</span>&gt;</span>
</code></pre>
<ul>
<li>定义你想要分享的Intent。在onCreateOptionsMenu()方法中调用 MenuItemCompat.getActionProvider() 获取ShareActionProvider对象，然后调用ShareActionProvider的setShareIntent()设置分享意图。</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">private</span> ShareActionProvider mShareActionProvider;

<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(Menu menu)</span> </span>{
    getMenuInflater().inflate(R.menu.main_activity_actions, menu);

    <span class="hljs-comment">// Set up ShareActionProvider's default share intent</span>
    MenuItem shareItem = menu.findItem(R.id.action_share);
    mShareActionProvider = (ShareActionProvider)
            MenuItemCompat.getActionProvider(shareItem);
    mShareActionProvider.setShareIntent(getDefaultIntent());

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onCreateOptionsMenu(menu);
}

<span class="hljs-javadoc">/** Defines a default (dummy) share intent to initialize the action provider.
  * However, as soon as the actual content to be used in the intent
  * is known or changes, you must update the share intent by again calling
  * mShareActionProvider.setShareIntent()
  */</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> Intent <span class="hljs-title">getDefaultIntent</span><span class="hljs-params">()</span> </span>{
    Intent intent = <span class="hljs-keyword">new</span> Intent(Intent.ACTION_SEND);
    intent.setType(<span class="hljs-string">"image/*"</span>);
    <span class="hljs-keyword">return</span> intent;
}
</code></pre>
<p>默认情况下，ShareActionProvider根据用户选择的频繁度进行排序，越频繁的越靠上，最频繁的直接作为一个action bar的一个默认分享按钮存在。并且排序信息保存在一个名为DEFAULT_SHARE_HISTORY_FILE_NAME的私有文件中。如果使用ShareActionProvider或其子类只进行一种操作的话，可以继续使用这个历史文件而不需要其它操作。如果你用SharedActionProvider或子类同时进行多种不同的操作，那么每一个ShareActionProvider应当分别指定自己的历史文件去维护自己的历史记录。通过调用setShareHistoryFileName()并且创建一个xml的文件来创建不同的历史文件。</p>
<h4 id="actionprovider">创建自定义的ActionProvider</h4>
<p>要创建自定义的ActionProvider只需要简单的继承ActionProvider类，并且实现下列方法。</p>
<ul>
<li>OnCreateActionView()这个方法用来获取action view。使用从构造器中接收的Context对象，获取一个LayoutInflater对象的实例，并且用XML资源来填充操作视窗，然后注册事件监听器。</li>
</ul>
<pre><code class="lang-java">
<span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">onCreateActionView</span><span class="hljs-params">(MenuItem forItem)</span> </span>{
    <span class="hljs-comment">// Inflate the action view to be shown on the action bar.</span>
    LayoutInflater layoutInflater = LayoutInflater.from(mContext);
    View view = layoutInflater.inflate(R.layout.action_provider, <span class="hljs-keyword">null</span>);
    ImageButton button = (ImageButton) view.findViewById(R.id.button);
    button.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
            <span class="hljs-comment">// Do something...</span>
        }
    });
    <span class="hljs-keyword">return</span> view;
}
</code></pre>
<ul>
<li>onPerformDefaultAction()在选中悬浮菜单中的菜单时，系统会调用这个方法，并且操作提供器应该这对这个选中的菜单项执行默认的操作。但是，如果你的操作提供器提供了一个子菜单，即使是悬浮菜单中一个菜单项的子菜单，那么也要通过onPrepareSubMenu()回调方法来显示子菜单。这样onPerformDefaultAction()在子菜单显示时就不会被调用。注意：实现了onOptionsItemSelected()回调方法的Activity或Frament对象能够通过处理item-selected事件（并且返回true）来覆盖操作提供器的默认行为，这种情况下，系统不会调用onPerformDefaultAction()方法。</li>
</ul>
<h3 id="">添加导航选项标签</h3>
<p>action bar 选项卡可以让用户非常方便的浏览和切换不同的视图，并且能够适配不同的屏幕。例如：当屏幕足够宽的时候，选项卡可以和action button并肩显示（如下图1），当在窄屏上，它将与action bar分离显示(如下图2)。在一些情况下，Android系统将会在action bar中以下拉列表的形式显示选项卡条目用来确保最合适的适配。</p>
<p><img src="http://developer.android.com/images/ui/actionbar-tabs@2x.png" alt=""></p>
<p><img src="http://developer.android.com/images/ui/actionbar-tabs-stacked@2x.png" alt=""></p>
<p>为action bar添加选项卡，一般需要以下步骤：</p>
<ol>
<li><p>实现ActionBar.TabListener接口，这个接口提供了一些选项卡事件的回调函数。</p>
</li>
<li><p>创建ActionBar.Tab，通过调用setTabListener()方法设置 ActionBar.TabListener。setText()方法可以用来设置选项卡的标题。</p>
</li>
<li><p>调用addTab()方法来将所有的选项卡添加到action bar上。</p>
</li>
</ol>
<p>示例：</p>
<p>实现ActionBar.TabListener</p>
<pre><code class="lang-java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabListener</span>&lt;<span class="hljs-title">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Fragment</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">ActionBar</span>.<span class="hljs-title">TabListener</span> </span>{
    <span class="hljs-keyword">private</span> Fragment mFragment;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Activity mActivity;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String mTag;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;T&gt; mClass;

    <span class="hljs-javadoc">/** Constructor used each time a new tab is created.
      *<span class="hljs-javadoctag"> @param</span> activity  The host Activity, used to instantiate the fragment
      *<span class="hljs-javadoctag"> @param</span> tag  The identifier tag for the fragment
      *<span class="hljs-javadoctag"> @param</span> clz  The fragment's Class, used to instantiate the fragment
      */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TabListener</span><span class="hljs-params">(Activity activity, String tag, Class&lt;T&gt; clz)</span> </span>{
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    <span class="hljs-comment">/* The following are each of the ActionBar.TabListener callbacks */</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onTabSelected</span><span class="hljs-params">(Tab tab, FragmentTransaction ft)</span> </span>{
        <span class="hljs-comment">// Check if the fragment is already initialized</span>
        <span class="hljs-keyword">if</span> (mFragment == <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// If not, instantiate and add it to the activity</span>
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// If it exists, simply attach it in order to show it</span>
            ft.attach(mFragment);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onTabUnselected</span><span class="hljs-params">(Tab tab, FragmentTransaction ft)</span> </span>{
        <span class="hljs-keyword">if</span> (mFragment != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// Detach the fragment, because another one is being attached</span>
            ft.detach(mFragment);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onTabReselected</span><span class="hljs-params">(Tab tab, FragmentTransaction ft)</span> </span>{
        <span class="hljs-comment">// User selected the already selected tab. Usually do nothing.</span>
    }
}
</code></pre>
<p>注意：在这里不能调用fragment transaction的commit()方法，否则系统可能会出现异常，也不能添加这些fragment到返回栈。</p>
<p>接下来创建每一个需要添加到ActionBar上的ActionBar.Tab。注意，必须调用ActionBar的setNavigationMode(NAVIGATION_MODE_TABS)使选项卡可用。</p>
<pre><code class="lang-java">
<span class="hljs-annotation">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    <span class="hljs-comment">// Notice that setContentView() is not used, because we use the root</span>
    <span class="hljs-comment">// android.R.id.content as the container for each fragment</span>

    <span class="hljs-comment">// setup action bar for tabs</span>
    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(<span class="hljs-keyword">false</span>);

    Tab tab = actionBar.newTab()
                       .setText(R.string.artist)
                       .setTabListener(<span class="hljs-keyword">new</span> TabListener&lt;ArtistFragment&gt;(
                               <span class="hljs-keyword">this</span>, <span class="hljs-string">"artist"</span>, ArtistFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
                   .setText(R.string.album)
                   .setTabListener(<span class="hljs-keyword">new</span> TabListener&lt;AlbumFragment&gt;(
                           <span class="hljs-keyword">this</span>, <span class="hljs-string">"album"</span>, AlbumFragment.class));
    actionBar.addTab(tab);
}
</code></pre>
<p>此外，我们还可以通过结合ViewPager来实现滑动切换视图。</p>
<h3 id="">添加下拉列表导航</h3>
<p><img src="http://developer.android.com/images/ui/actionbar-dropdown@2x.png" alt=""></p>
<p>Activity还提供了一个下拉列表的导航，如上图所示。下拉列表适用于不频繁的操作，如果操作频繁，请使用选项卡导航。</p>
<p>创建一个下拉列表导航需要以下步骤：</p>
<ol>
<li>创建一个SpinnerAdapter，这个适配器用于填充列表。</li>
<li>实现ActionBar.OnNavigationListener用于监听列表选中操作。</li>
<li>调用setNavigationMode(NAVIGATION_MODE_LIST).设置导航模式为列表模式。</li>
<li>调用setListNavigationCallbacks()方法设置监听器。</li>
</ol>
<h3 id="actionbar">ActionBar样式</h3>
<p>ActionBar允许自定义ActionBar的颜色，字体颜色，按钮样式等等。你可以使用Android的样式和主题框架通过指定的样式属性来自定义ActionBar。</p>
<p>注意：使用的所有背景图片必须为9patch图片，并且图片要小于40dp高和30dp宽。</p>
<h4 id="">通用样式</h4>
<p>自定义ActionBar样式可以通过继承Widget.AppCompat.ActionBar来实现。查看Widget.AppCompat.ActionBar源码</p>
<pre><code class="lang-xml">
<span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.ActionBar"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionBar"</span>&gt;</span><span class="css">
</span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionBar"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">""</span>&gt;</span><span class="css">
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">displayOptions</span>"&gt;<span class="hljs-tag">useLogo</span>|<span class="hljs-tag">showHome</span>|<span class="hljs-tag">showTitle</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">divider</span>"&gt;?<span class="hljs-tag">attr</span>/<span class="hljs-tag">dividerVertical</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">height</span>"&gt;?<span class="hljs-tag">attr</span>/<span class="hljs-tag">actionBarSize</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">homeLayout</span>"&gt;<span class="hljs-at_rule">@<span class="hljs-keyword">layout/abc_action_bar_home&lt;/item&gt;</span>

        &lt;item name=<span class="hljs-string">"titleTextStyle"</span>&gt;@style/TextAppearance.AppCompat.Widget.ActionBar.Title&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"subtitleTextStyle"</span>&gt;@style/TextAppearance.AppCompat.Widget.ActionBar.Subtitle
        &lt;/item&gt;

        &lt;item name=<span class="hljs-string">"background"</span>&gt;@drawable/abc_ab_transparent_dark_holo&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"backgroundStacked"</span>&gt;@drawable/abc_ab_stacked_transparent_dark_holo&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"backgroundSplit"</span>&gt;@drawable/abc_ab_bottom_transparent_dark_holo&lt;/item&gt;

        &lt;item name=<span class="hljs-string">"actionButtonStyle"</span>&gt;@style/Widget.AppCompat.ActionButton&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"actionOverflowButtonStyle"</span>&gt;@style/Widget.AppCompat.ActionButton.Overflow&lt;/item&gt;

        &lt;item name=<span class="hljs-string">"progressBarStyle"</span>&gt;@style/Widget.AppCompat.ProgressBar.Horizontal&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"indeterminateProgressStyle"</span>&gt;@style/Widget.AppCompat.ProgressBar&lt;/item&gt;
</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
</code></pre>
<p>background:设置actionbar的背景。</p>
<p>backgroundstacked：设置tab的背景</p>
<p>backButtonStyle：设置按钮的样式</p>
<p>displayOptions：显示选项</p>
<p>divider：两个action按钮之间的分割线。</p>
<p>titleTextStyle:标题样式</p>
<h3 id="actionitem">ActionItem样式</h3>
<p>自定义ActionItem样式可以通过继承Widget.AppCompat.ActionButton来实现。查看Widget.AppCompat.ActionButton源码</p>
<pre><code class="lang-xml">
   <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.ActionButton"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionButton"</span>&gt;</span><span class="css">
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionButton"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">""</span>&gt;</span><span class="css">
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:background"</span>&gt;?<span class="hljs-tag">attr</span>/<span class="hljs-tag">actionBarItemBackground</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:paddingLeft"</span>&gt;12<span class="hljs-tag">dip</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:paddingRight"</span>&gt;12<span class="hljs-tag">dip</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:minWidth"</span>&gt;<span class="hljs-at_rule">@<span class="hljs-keyword">dimen/abc_action_button_min_width&lt;/item&gt;</span>
        &lt;item name=<span class="hljs-string">"android:minHeight"</span>&gt;?attr/actionBarSize&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:gravity"</span>&gt;center&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:maxLines"</span>&gt;<span class="hljs-number">2</span>&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"textAllCaps"</span>&gt;@bool/abc_config_actionMenuItemAllCaps&lt;/item&gt;
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
</code></pre>
<h3 id="tab">Tab导航样式</h3>
<p>自定义Tab导航样式可以通过继承Widget.AppCompat.ActionBar.TabView来实现。查看Widget.AppCompat.ActionBar.TabView源码</p>
<pre><code class="lang-xml">
    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.ActionBar.TabView"</span>
           <span class="hljs-attribute">parent</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionBar.TabView"</span>&gt;</span><span class="css">
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.Base.ActionBar.TabView"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">""</span>&gt;</span><span class="css">
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:background"</span>&gt;<span class="hljs-at_rule">@<span class="hljs-keyword">drawable/abc_tab_indicator_ab_holo&lt;/item&gt;</span>
        &lt;item name=<span class="hljs-string">"android:gravity"</span>&gt;center_horizontal&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:paddingLeft"</span>&gt;<span class="hljs-number">16</span>dip&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:paddingRight"</span>&gt;<span class="hljs-number">16</span>dip&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:minWidth"</span>&gt;<span class="hljs-number">80</span>dip&lt;/item&gt;
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
</code></pre>
<h4 id="">下拉列表样式</h4>
<p>自定义下拉列表样式可以通过继承Widget.AppCompat.Spinner.DropDown.ActionBar来实现。查看Widget.AppCompat.ActionBar.TabView源码</p>
<pre><code class="lang-xml">
   <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.Spinner.DropDown.ActionBar"</span>
           <span class="hljs-attribute">parent</span>=<span class="hljs-value">"Widget.AppCompat.Base.Spinner"</span>&gt;</span><span class="css">
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Widget.AppCompat.Base.Spinner"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">""</span>&gt;</span><span class="css">
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">spinnerMode</span>"&gt;<span class="hljs-tag">dropdown</span>&lt;/<span class="hljs-tag">item</span>&gt;
        &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:popupBackground"</span>&gt;<span class="hljs-at_rule">@<span class="hljs-keyword">drawable/abc_menu_dropdown_panel_holo_dark&lt;/item&gt;</span>
        &lt;item name=<span class="hljs-string">"android:dropDownSelector"</span>&gt;@drawable/abc_list_selector_holo_dark&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:dropDownVerticalOffset"</span>&gt;<span class="hljs-number">0</span>dip&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:dropDownHorizontalOffset"</span>&gt;<span class="hljs-number">0</span>dip&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:dropDownWidth"</span>&gt;wrap_content&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:gravity"</span>&gt;left|center_vertical&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:clickable"</span>&gt;true&lt;/item&gt;
        &lt;item name=<span class="hljs-string">"android:background"</span>&gt;@drawable/abc_spinner_ab_holo_dark&lt;/item&gt;
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
</code></pre>
<h3 id="">扩展阅读：</h3>
<p><a href="http://developer.android.com/guide/topics/ui/actionbar.html" target="_blank">官方ActionBar开发指南</a></p>
<p><a href="http://developer.android.com/training/implementing-navigation/lateral.html" target="_blank">创建带有选项卡的滑动视图</a></p>
<p><a href="">ActionBarCompat and I/O 2013 App Source</a></p>
<p><a href="http://stackoverflow.com/questions/7844517/difference-between-actionbarsherlock-and-actionbar-compatibility" target="_blank">ActionBarSherlock和ActionBar Compatibility区别</a></p>
<p><a href="https://developer.android.com/training/basics/actionbar/index.html" target="_blank">ActionBar Training</a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        
        <a href="../ui/toast.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Toast"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"disqus":{"shortName":"malinkang"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
