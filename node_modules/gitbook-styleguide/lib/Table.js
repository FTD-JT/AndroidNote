'use strict';

var React = require('react');
var classNames = require('classnames');

var Table = React.createClass({
    displayName: 'Table',
    getDefaultProps: function getDefaultProps() {
        return {
            bordered: false,
            className: ''
        };
    },
    render: function render() {
        var className = classNames('table', { 'table-bordered': this.props.bordered }, this.props.className);

        return React.createElement(
            'table',
            { className: className },
            this.props.children
        );
    }
});

/**
 * ExpendableBody creates a <tbody> element displaying only `display` elements by default
 * If the number of elements is larger than the original `display` prop, a `Show More`
 * button is appended as the last row of the <tbody>. Clicking on it will display `step`
 * more elements each time, until every element is renderded.
 *
 * The elements to display are passed through the `data` prop as an array.
 * Each item of the array can either be:
 *     - a value: the default is to render a single cell with the value for this row
 *     - an array of values: the default is to render each value in a cell for this row
 *     - an object
 *
 * To render an object or customize the display of value(s), the `renderRow` prop accepts
 * a function to which is passed the current row item (value, array or object) and the row index.
 * It must return the corresponding row <tr key={index}> element.
 *
 * Finally, the `cols` prop is used to correctly display the `Show More` button in the table when
 * passing an array of objects to `data`.
 *
 * The `center` props allows for centering all values rendered by default.
 */

var ExpendableBody = React.createClass({
    displayName: 'ExpendableBody',
    getDefaultProps: function getDefaultProps() {
        return {
            display: 5,
            step: 5,
            cols: 1,
            center: false
        };
    },
    getInitialState: function getInitialState() {
        return {
            limit: this.props.display
        };
    },
    isArray: function isArray(o) {
        return Object.prototype.toString.call(o) == '[object Array]';
    },
    defaultRenderRow: function defaultRenderRow(item, i) {
        var className = classNames({
            'text-center': this.props.center
        });

        // Array of values per row
        if (this.isArray(item)) {
            return React.createElement(
                'tr',
                { key: i },
                item.map(function (value, j) {
                    return React.createElement(
                        'td',
                        { className: className, key: j },
                        value
                    );
                })
            );
        } else {
            // Single value
            return React.createElement(
                'tr',
                { key: i },
                React.createElement(
                    'td',
                    { className: className },
                    item
                )
            );
        }
    },
    showMore: function showMore() {
        var step = this.props.step;
        var limit = this.state.limit;


        this.setState({
            limit: limit + step
        });
    },
    renderShowMore: function renderShowMore() {
        var _props = this.props;
        var data = _props.data;
        var cols = _props.cols;
        var step = _props.step;
        var limit = this.state.limit;

        var length = data.length;

        // Don't display when everything's on the screen
        if (limit >= length) {
            return null;
        }

        // Try to get colSpan from data if array
        if (Boolean(length) && this.isArray(data[0])) {
            cols = data[0].length.toString();
        }

        return React.createElement(
            'tr',
            null,
            React.createElement(
                'td',
                { className: 'text-center', colSpan: cols },
                React.createElement(
                    'div',
                    { className: 'show-more', onClick: this.showMore },
                    'Show ',
                    step,
                    ' more (',
                    length - limit,
                    ')'
                )
            )
        );
    },
    renderRow: function renderRow(item, i) {
        var renderRow = this.props.renderRow || this.defaultRenderRow;
        return renderRow(item, i);
    },
    render: function render() {
        var data = this.props.data;
        var limit = this.state.limit;


        return React.createElement(
            'tbody',
            { className: 'table-body-expendable' },
            data.slice(0, limit).map(this.renderRow, this),
            this.renderShowMore()
        );
    }
});

module.exports = Table;
module.exports.ExpendableBody = ExpendableBody;
//# sourceMappingURL=data:application/json;base64,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LE1BQVIsQ0FBZSxRQUFmLEVBQVA7QUFDSDs7QUFFRCxlQUNJO0FBQUE7QUFBQTtBQUNJO0FBQUE7QUFBQSxrQkFBSSxXQUFVLGFBQWQsRUFBNEIsU0FBUyxJQUFyQztBQUNJO0FBQUE7QUFBQSxzQkFBSyxXQUFVLFdBQWYsRUFBMkIsU0FBUyxLQUFLLFFBQXpDO0FBQUE7QUFDVSx3QkFEVjtBQUFBO0FBQ3VCLDZCQUFTLEtBRGhDO0FBQUE7QUFBQTtBQURKO0FBREosU0FESjtBQVNILEtBdEZvQztBQXdGckMsYUF4RnFDLHFCQXdGM0IsSUF4RjJCLEVBd0ZyQixDQXhGcUIsRUF3RmxCO0FBQ2YsWUFBTSxZQUFZLEtBQUssS0FBTCxDQUFXLFNBQVgsSUFBd0IsS0FBSyxnQkFBL0M7QUFDQSxlQUFPLFVBQVUsSUFBVixFQUFnQixDQUFoQixDQUFQO0FBQ0gsS0EzRm9DO0FBNkZyQyxVQTdGcUMsb0JBNkY1QjtBQUFBLFlBQ0csSUFESCxHQUNjLEtBQUssS0FEbkIsQ0FDRyxJQURIO0FBQUEsWUFFRyxLQUZILEdBRWEsS0FBSyxLQUZsQixDQUVHLEtBRkg7OztBQUlMLGVBQ0k7QUFBQTtBQUFBLGNBQU8sV0FBVSx1QkFBakI7QUFDQyxpQkFBSyxLQUFMLENBQVcsQ0FBWCxFQUFjLEtBQWQsRUFBcUIsR0FBckIsQ0FBeUIsS0FBSyxTQUE5QixFQUF5QyxJQUF6QyxDQUREO0FBRUMsaUJBQUssY0FBTDtBQUZELFNBREo7QUFNSDtBQXZHb0MsQ0FBbEIsQ0FBdkI7O0FBMEdBLE9BQU8sT0FBUCxHQUFpQixLQUFqQjtBQUNBLE9BQU8sT0FBUCxDQUFlLGNBQWYsR0FBZ0MsY0FBaEMiLCJmaWxlIjoiVGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSZWFjdCAgICAgID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbmNvbnN0IFRhYmxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIHByb3BUeXBlczoge1xuICAgICAgICBib3JkZXJlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgY2hpbGRyZW46IFJlYWN0LlByb3BUeXBlcy5ub2RlXG4gICAgfSxcblxuICAgIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvcmRlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJydcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgICAgICAgICAgJ3RhYmxlJyxcbiAgICAgICAgICAgIHsgJ3RhYmxlLWJvcmRlcmVkJzogdGhpcy5wcm9wcy5ib3JkZXJlZCB9LFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jbGFzc05hbWVcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gPHRhYmxlIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICA8L3RhYmxlPjtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBFeHBlbmRhYmxlQm9keSBjcmVhdGVzIGEgPHRib2R5PiBlbGVtZW50IGRpc3BsYXlpbmcgb25seSBgZGlzcGxheWAgZWxlbWVudHMgYnkgZGVmYXVsdFxuICogSWYgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpcyBsYXJnZXIgdGhhbiB0aGUgb3JpZ2luYWwgYGRpc3BsYXlgIHByb3AsIGEgYFNob3cgTW9yZWBcbiAqIGJ1dHRvbiBpcyBhcHBlbmRlZCBhcyB0aGUgbGFzdCByb3cgb2YgdGhlIDx0Ym9keT4uIENsaWNraW5nIG9uIGl0IHdpbGwgZGlzcGxheSBgc3RlcGBcbiAqIG1vcmUgZWxlbWVudHMgZWFjaCB0aW1lLCB1bnRpbCBldmVyeSBlbGVtZW50IGlzIHJlbmRlcmRlZC5cbiAqXG4gKiBUaGUgZWxlbWVudHMgdG8gZGlzcGxheSBhcmUgcGFzc2VkIHRocm91Z2ggdGhlIGBkYXRhYCBwcm9wIGFzIGFuIGFycmF5LlxuICogRWFjaCBpdGVtIG9mIHRoZSBhcnJheSBjYW4gZWl0aGVyIGJlOlxuICogICAgIC0gYSB2YWx1ZTogdGhlIGRlZmF1bHQgaXMgdG8gcmVuZGVyIGEgc2luZ2xlIGNlbGwgd2l0aCB0aGUgdmFsdWUgZm9yIHRoaXMgcm93XG4gKiAgICAgLSBhbiBhcnJheSBvZiB2YWx1ZXM6IHRoZSBkZWZhdWx0IGlzIHRvIHJlbmRlciBlYWNoIHZhbHVlIGluIGEgY2VsbCBmb3IgdGhpcyByb3dcbiAqICAgICAtIGFuIG9iamVjdFxuICpcbiAqIFRvIHJlbmRlciBhbiBvYmplY3Qgb3IgY3VzdG9taXplIHRoZSBkaXNwbGF5IG9mIHZhbHVlKHMpLCB0aGUgYHJlbmRlclJvd2AgcHJvcCBhY2NlcHRzXG4gKiBhIGZ1bmN0aW9uIHRvIHdoaWNoIGlzIHBhc3NlZCB0aGUgY3VycmVudCByb3cgaXRlbSAodmFsdWUsIGFycmF5IG9yIG9iamVjdCkgYW5kIHRoZSByb3cgaW5kZXguXG4gKiBJdCBtdXN0IHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByb3cgPHRyIGtleT17aW5kZXh9PiBlbGVtZW50LlxuICpcbiAqIEZpbmFsbHksIHRoZSBgY29sc2AgcHJvcCBpcyB1c2VkIHRvIGNvcnJlY3RseSBkaXNwbGF5IHRoZSBgU2hvdyBNb3JlYCBidXR0b24gaW4gdGhlIHRhYmxlIHdoZW5cbiAqIHBhc3NpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyB0byBgZGF0YWAuXG4gKlxuICogVGhlIGBjZW50ZXJgIHByb3BzIGFsbG93cyBmb3IgY2VudGVyaW5nIGFsbCB2YWx1ZXMgcmVuZGVyZWQgYnkgZGVmYXVsdC5cbiAqL1xuXG5jb25zdCBFeHBlbmRhYmxlQm9keSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgZGF0YTogICAgICBSZWFjdC5Qcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgICAgICAgZGlzcGxheTogICBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBzdGVwOiAgICAgIFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIGNvbHM6ICAgICAgUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgcmVuZGVyUm93OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgY2VudGVyOiAgICBSZWFjdC5Qcm9wVHlwZXMuYm9vbFxuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNwbGF5OiAgIDUsXG4gICAgICAgICAgICBzdGVwOiAgICAgIDUsXG4gICAgICAgICAgICBjb2xzOiAgICAgIDEsXG4gICAgICAgICAgICBjZW50ZXI6ICAgIGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxpbWl0OiB0aGlzLnByb3BzLmRpc3BsYXlcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgaXNBcnJheShvKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9LFxuXG4gICAgZGVmYXVsdFJlbmRlclJvdyhpdGVtLCBpKSB7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoe1xuICAgICAgICAgICAgJ3RleHQtY2VudGVyJzogdGhpcy5wcm9wcy5jZW50ZXJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXJyYXkgb2YgdmFsdWVzIHBlciByb3dcbiAgICAgICAgaWYgKHRoaXMuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8dHIga2V5PXtpfT5cbiAgICAgICAgICAgICAgICAgICAge2l0ZW0ubWFwKGZ1bmN0aW9uKHZhbHVlLCBqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHRkIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBrZXk9e2p9Pnt2YWx1ZX08L3RkPjtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNpbmdsZSB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8dHIga2V5PXtpfT5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT57aXRlbX08L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNob3dNb3JlKCkge1xuICAgICAgICBjb25zdCB7IHN0ZXAgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgbGltaXQgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBsaW1pdDogbGltaXQgKyBzdGVwXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW5kZXJTaG93TW9yZSgpIHtcbiAgICAgICAgbGV0IHsgZGF0YSwgY29scywgc3RlcCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBsaW1pdCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoICA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICAgIC8vIERvbid0IGRpc3BsYXkgd2hlbiBldmVyeXRoaW5nJ3Mgb24gdGhlIHNjcmVlblxuICAgICAgICBpZiAobGltaXQgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSB0byBnZXQgY29sU3BhbiBmcm9tIGRhdGEgaWYgYXJyYXlcbiAgICAgICAgaWYgKEJvb2xlYW4obGVuZ3RoKSAmJiB0aGlzLmlzQXJyYXkoZGF0YVswXSkpIHtcbiAgICAgICAgICAgIGNvbHMgPSBkYXRhWzBdLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIiBjb2xTcGFuPXtjb2xzfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaG93LW1vcmVcIiBvbkNsaWNrPXt0aGlzLnNob3dNb3JlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNob3cge3N0ZXB9IG1vcmUgKHtsZW5ndGggLSBsaW1pdH0pXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICByZW5kZXJSb3coaXRlbSwgaSkge1xuICAgICAgICBjb25zdCByZW5kZXJSb3cgPSB0aGlzLnByb3BzLnJlbmRlclJvdyB8fCB0aGlzLmRlZmF1bHRSZW5kZXJSb3c7XG4gICAgICAgIHJldHVybiByZW5kZXJSb3coaXRlbSwgaSk7XG4gICAgfSxcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gICA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgbGltaXQgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0Ym9keSBjbGFzc05hbWU9XCJ0YWJsZS1ib2R5LWV4cGVuZGFibGVcIj5cbiAgICAgICAgICAgIHtkYXRhLnNsaWNlKDAsIGxpbWl0KS5tYXAodGhpcy5yZW5kZXJSb3csIHRoaXMpfVxuICAgICAgICAgICAge3RoaXMucmVuZGVyU2hvd01vcmUoKX1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVGFibGU7XG5tb2R1bGUuZXhwb3J0cy5FeHBlbmRhYmxlQm9keSA9IEV4cGVuZGFibGVCb2R5O1xuIl19